import osimport numpy as npimport opensmilefrom sklearn.preprocessing import LabelEncoderimport pandas as pdfrom pathlib import Path# 設定資料夾路徑（資料夾結構：data/情緒名稱/*.wav）DATA_ROOT = "data"OUTPUT_CSV = "egemaps_features.csv"# 初始化 opensmile，使用 eGeMAPSv02 特徵集smile = opensmile.Smile(    feature_set=opensmile.FeatureSet.eGeMAPSv02,    feature_level=opensmile.FeatureLevel.Functionals,)features = []labels = []paths = []# 遍歷每個情緒資料夾for emotion_folder in os.listdir(DATA_ROOT):    folder_path = os.path.join(DATA_ROOT, emotion_folder)    if not os.path.isdir(folder_path):        continue    for file in os.listdir(folder_path):        if file.endswith(".wav"):            filepath = os.path.join(folder_path, file)            try:                feature_vector = smile.process_file(filepath).values.flatten()                features.append(feature_vector)                labels.append(emotion_folder)                paths.append(filepath)            except Exception as e:                print(f"❌ 無法處理 {filepath}：{e}")# 將情緒標籤轉換為數字le = LabelEncoder()encoded_labels = le.fit_transform(labels)# 存為 DataFramedf = pd.DataFrame(features)df["label"] = encoded_labelsdf["emotion"] = labelsdf["path"] = paths# 儲存 CSVdf.to_csv(OUTPUT_CSV, index=False)print(f"✅ 已儲存特徵與標籤至 {OUTPUT_CSV}")